<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Name-Binding - A Python API for Files and Objects &mdash; pysourceinfo 0.1.32 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.32',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pysourceinfo 0.1.32 documentation" href="index.html" />
    <link rel="next" title="‘pysourceinfo.__init__’ - Module" href="pysourceinfo.html" />
    <link rel="prev" title="Howto" href="howto.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pysourceinfo.html" title="‘pysourceinfo.__init__’ - Module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="howto.html" title="Howto"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pysourceinfo 0.1.32 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="name-binding-a-python-api-for-files-and-objects">
<span id="namebinding"></span><h1>Name-Binding - A Python API for Files and Objects<a class="headerlink" href="#name-binding-a-python-api-for-files-and-objects" title="Permalink to this headline">¶</a></h1>
<p>The main task of the subsystem <em>PySourceInfo</em> is to provide code location for specific
in memory objects, and partially vice-versa.
Therefore a set of functions is defined with a similar pattern of signatures for
specific objects.
A flat naming schema in advance of multiple parameters is selected for simple use
by tab-completion.</p>
<p>The call pattern partially occur more than once in the following figure, the distinction is
than given by the name-resolution with replaced applicable objects(<em>obj</em>) for each context.
The general schema is given by the following mappings.
The application scope for filesystem objects is hereby draftly divided into the two views
&#8220;filesystem-view&#8221; and the OO-style &#8220;name-binding-view&#8221;.
This reflects the logical access to language elements by addressing objects, while the
persistency of the code-objects is provided via files within a filesystem addressed by
the filesystem type specific name-binding.</p>
<p>The <em>&lt;obj&gt;</em> is replaced by the source to be analyzed. When the object has formally to be doubled,
than the <em>&lt;obj&gt;</em> is omitted. E.g.</p>
<blockquote>
<div><em>getModuleModule_pathname</em></div></blockquote>
<p>results in</p>
<blockquote>
<div><em>getmodule_pathname</em>.</div></blockquote>
<p>Currently available sources are:</p>
<ul class="simple">
<li><em>Caller</em> - Python object entries contained in the call stack as provided
by the  <em>stack</em> object from <em>inspect</em>. The stack as a set of items related
functions are handeled by <em>&lt;obj&gt;::=Stack</em></li>
<li><em>Module</em> - Python object <em>module</em></li>
</ul>
<p>The following figure depicts the application scopes of the interface for the case
of the standard import by using the object identifiers as they are reflected in the
<em>__qualname__</em>.</p>
<p id="filenamebinding"><a class="reference internal" href="_images/name-binding.png"><img alt="namebinding" src="_images/name-binding.png" style="width: 800px;" /></a>
<a class="reference external" href="_static/name-binding.png"><img alt="zoom" src="_images/zoom.png" style="width: 16px;" /></a></p>
<p>Another special case common to all Python releases is the definition of a runtime
package, resulting in an adapted PYTHONPATH entry, see previous figure for &#8216;(*)&#8217;.
The following main cases are possible:</p>
<ol class="arabic simple">
<li>The package consists of one file only.</li>
<li>The package consists of multiple files within a directory.</li>
<li>The package consists of one or more sub-packages within a directory.</li>
<li>The package is delivered as a compressed <em>zip</em> file (<a class="reference internal" href="references.html#pep273" id="id1">[PEP273]</a>, <a class="reference internal" href="references.html#pep441" id="id2">[PEP441]</a>).</li>
<li>The package is an implicit namespace package, <a class="reference internal" href="references.html#pep420" id="id3">[PEP420]</a>.</li>
</ol>
<p>For detailed information refer to <a class="reference external" href="runtimepackages.html#">Runtime Packages</a>.</p>
<p>The scope of the interfaces changes slightly, when binary modules were loaded explicitly.
The binaries for <strong>Python2</strong> are addressed by the following interfaces.
The marked bold interfaces point to the binaries, while the source location remains
the same including the linenumber, which is related to the source code.</p>
<p id="filenamebindingbin"><a class="reference internal" href="_images/name-binding-bin.png"><img alt="namebindingbin" src="_images/name-binding-bin.png" style="width: 800px;" /></a>
<a class="reference external" href="_static/name-binding-bin.png"><img alt="zoom" src="_images/zoom.png" style="width: 16px;" /></a></p>
<p>The default locations and the basic paradigm for binary files has changed for <strong>Python3</strong>
in accordance to <a class="reference internal" href="references.html#pep3147" id="id4">[PEP3147]</a>.
This is reflected as depicted in the following figure.</p>
<p id="filenamebindingbin-pep3147"><a class="reference internal" href="_images/name-binding-bin-pep3147.png"><img alt="namebindingbinpep3147" src="_images/name-binding-bin-pep3147.png" style="width: 800px;" /></a>
<a class="reference external" href="_static/name-binding-bin-pep3147.png"><img alt="zoom" src="_images/zoom.png" style="width: 16px;" /></a></p>
<p id="objectnamebinding">Additional partial helper sources are available:</p>
<ul class="simple">
<li><em>Object</em> - Common type and access coverage</li>
<li><em>Stack</em> - Generic helper for the <em>stack</em> object as provided by <em>inspect</em></li>
<li><em>Sys</em> - Generic helper based on <em>sys</em></li>
</ul>
<div class="section" id="address-components">
<h2>Address Components<a class="headerlink" href="#address-components" title="Permalink to this headline">¶</a></h2>
<p>This section discusses the components required for the assembly of the runtime and module addresses.
These are in general straight-forward, but in some cases require special handling for a general interface:</p>
<ol class="arabic simple">
<li>due to pure dynamic reconstruction from thr RTTI - Runtime-Type-Information</li>
<li>due to some special behaviour of the Python interpreter e.g. in case of nested classes</li>
<li>due to missing special adapted coverage by the available tools, e.g. in case of meta-classes and decorators</li>
</ol>
<p>Additional information related to advanced features based on the call stack is provided by the companion package
<em>PyStackInfo</em> <a class="reference internal" href="references.html#pystackinfo" id="id5">[pystackinfo]</a> .</p>
<div class="section" id="address-hierarchies">
<h3>Address Hierarchies<a class="headerlink" href="#address-hierarchies" title="Permalink to this headline">¶</a></h3>
<p>The address as defined for a component is specifically different for various views depending on the domain it is based on.
This comprises in case of programming e.g. the inheritance view and the containment view, which could
not be transformed simply to runtime one view in any case.
In case of code representation by Python the containment view and the inheritance view use partially the
same notation(dotted-notation),
which basically inherently reflects Pythons core paradigm <a class="reference external" href="allareobjects.html">Anything is an Object</a>
- types are meta-objects at runtime.</p>
<div class="section" id="containment-and-inheritance">
<h4>Containment and Inheritance<a class="headerlink" href="#containment-and-inheritance" title="Permalink to this headline">¶</a></h4>
<p>The containment reflects the hierarchy of runtime elements - objects - as they are allocated initially by
the executed Python code.
These could span an arbitrary deep tree structure of data, class, and callable entries - reflected by the logical AST.</p>
<p>The inheritance is reflected by the class hierarchy, which defines basically a search order for reusable code elements.</p>
<p>In case of dynamic RTTI analysis and introspection the structure of the containment hierarchy of flat objects is
straight forward.
Flat objects are runtime objects without involved inheritance hierarchy, where the Python runtime information links
directly to the data entity representing the code element.
In case of derived classes the runtime reference may e.g. just address the derived class as the type, whereas the
actual code is part of a base class.
The <em>PySourceInfo</em> displays the code positions, thus has to evaluate the actual defining class within the class hierarchy
in order to display the location accurately.
The specific Python syntax elements of <em>meta-classes</em> and <em>decorators</em> has to be taken here into account as well as
<em>mix-ins</em>/<em>multiple-inheritance</em>.</p>
<p>The <em>PySourceInfo</em> handles all these cases accurately, but makes a compromise in case of performance-costly
runtime evaluation.
The user can add the decorator <em>getSourceLocation</em> to functions and methods when the
dynamic evaluation fails.</p>
</div>
<div class="section" id="nested-functions">
<h4>Nested Functions<a class="headerlink" href="#nested-functions" title="Permalink to this headline">¶</a></h4>
<p>Nesting in case of function definitions reflects the physical code location
properly.</p>
<p>Nesting is here similar to containment, but related to the type declaration and definition,
which reflects in case of functions finally the call hierarchy too.
This is also the natural behavior due to the limitation of the means of addressing a nested function
from outside within the enclosing scope.</p>
<p>The following example demonstrates the application on nested functions:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>

<span class="kn">from</span> <span class="nn">pysourceinfo.CallerCodeFlow</span> <span class="kn">import</span> <span class="n">getCallerOID</span><span class="p">,</span><span class="n">getCallerComponentOID</span><span class="p">,</span><span class="n">getSourceLocation</span>

<span class="n">module</span> <span class="o">=</span> <span class="n">getCallerOID</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">fctC</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">fctB</span><span class="p">():</span>
        <span class="k">def</span> <span class="nf">fctA</span><span class="p">():</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">getCallerComponentOID</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">ret</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">fctA</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fctB</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ret</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">fctC</span><span class="p">()</span>
<span class="k">print</span> <span class="n">ret</span>
</pre></div>
</td></tr></table></div>
<p>Resulting in the output:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">fctC</span><span class="o">.</span><span class="n">fctB</span><span class="o">.</span><span class="n">fctA</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="nested-classes">
<h4>Nested Classes<a class="headerlink" href="#nested-classes" title="Permalink to this headline">¶</a></h4>
<p>The nesting of class definitions reflects containment hierarchies in the sense of addressing the
class definition within the Python code at the concrete location of the containment
hierarchy appropriately.
Nesting is here similar to containment, but related to the type declaration and definition
by the meta-classes.</p>
<p>This is handled by the Python interpreter accurately for functions,
but the nested class defintions have some issues.
The references to the called classes are virtually transformed into the global scope.
The following script demonstrates the behavior:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>

<span class="kn">from</span> <span class="nn">pysourceinfo.CallerCodeFlow</span> <span class="kn">import</span> <span class="n">getCallerOID</span><span class="p">,</span><span class="n">getCallerComponentOID</span><span class="p">,</span><span class="n">getSourceLocation</span>

<span class="n">module</span> <span class="o">=</span> <span class="n">getCallerOID</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="n">getCallerComponentOID</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">ret</span>
        <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">()</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">ret</span>
    <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">()</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">()</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>

<span class="k">print</span> <span class="s2">&quot;c:               &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;b:               &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;a:               &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">)</span>

<span class="k">print</span> <span class="s2">&quot;c.getOID:        &quot;</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;b.getOID:        &quot;</span> <span class="o">+</span> <span class="n">b</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;a.getOID:        &quot;</span> <span class="o">+</span> <span class="n">a</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Resulting in the output for the class definitions/meta-data:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>c:               &lt;class &#39;__main__.C&#39;&gt;
b:               &lt;class &#39;__main__.B&#39;&gt;
a:               &lt;class &#39;__main__.A&#39;&gt;
</pre></div>
</td></tr></table></div>
<p>The following image depicts the positions of the local class definitions as has to be searched.</p>
<a class="reference internal image-reference" href="_images/nested-classes.png"><img alt="_images/nested-classes.png" src="_images/nested-classes.png" style="width: 650px;" /></a>
<p>The evaluated code paths by the current implemented default algorithm are:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">getOID</span><span class="p">:</span>        <span class="n">A</span><span class="o">.</span><span class="n">getOID</span>
<span class="n">b</span><span class="o">.</span><span class="n">getOID</span><span class="p">:</span>        <span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">getOID</span>
<span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">:</span>        <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">getOID</span>
</pre></div>
</td></tr></table></div>
<p>This could be corrected by the decorator <em>&#64;getSourceLocation()</em>:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="nd">@getSourceLocation</span><span class="p">()</span>
            <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="n">getCallerComponentOID</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">ret</span>
        <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">()</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">ret</span>
    <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">()</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span>
</pre></div>
</td></tr></table></div>
<p>To the expected behavior:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">getOID</span><span class="p">:</span>        <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">getOID</span>
<span class="n">b</span><span class="o">.</span><span class="n">getOID</span><span class="p">:</span>        <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">getOID</span>
<span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">:</span>        <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">getOID</span>
</pre></div>
</td></tr></table></div>
<p>The same behavior occurs for the old-syle classes:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
    <span class="k">class</span> <span class="nc">B</span><span class="p">:</span>
        <span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="n">pysourceinfo</span><span class="o">.</span><span class="n">PySourceInfo</span><span class="o">.</span><span class="n">getCallerOID</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">ret</span>
        <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">()</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">ret</span>
    <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">()</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="mixed-refrences">
<h4>Mixed-Refrences<a class="headerlink" href="#mixed-refrences" title="Permalink to this headline">¶</a></h4>
<p>Mixed references are containment paths with nested callables and callables from within inheritance hierarchies.
This results in a path for the source location, which is in dotted notation and includes the actual code elements,
instead of the dynamically assigned runtime types.</p>
<p>The following script demonstrates a more complex example with nested functions within
methods of nested classese:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>

<span class="kn">from</span> <span class="nn">pysourceinfo.CallerCodeFlow</span> <span class="kn">import</span> <span class="n">getCallerOID</span><span class="p">,</span><span class="n">getCallerComponentOID</span><span class="p">,</span><span class="n">getSourceLocation</span>

<span class="n">module</span> <span class="o">=</span> <span class="n">getCallerOID</span><span class="p">()</span>

<span class="n">module</span> <span class="o">=</span> <span class="n">getCallerOID</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="nd">@getSourceLocation</span><span class="p">()</span> <span class="c1"># fix nested classes</span>
            <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">def</span> <span class="nf">localFct01</span><span class="p">():</span>
                    <span class="k">def</span> <span class="nf">localFct00</span><span class="p">():</span>
                        <span class="n">ret</span> <span class="o">=</span> <span class="n">pysourceinfo</span><span class="o">.</span><span class="n">PySourceInfo</span><span class="o">.</span><span class="n">getCallerOID</span><span class="p">()</span>
                        <span class="k">return</span> <span class="n">ret</span>
                    <span class="n">ret</span> <span class="o">=</span> <span class="n">localFct00</span><span class="p">()</span>
                    <span class="k">return</span> <span class="n">ret</span>

                <span class="k">def</span> <span class="nf">localFct10</span><span class="p">():</span>
                    <span class="n">ret</span> <span class="o">=</span> <span class="n">localFct01</span><span class="p">()</span>
                    <span class="k">return</span> <span class="n">ret</span>

                <span class="n">ret</span> <span class="o">=</span> <span class="n">localFct10</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">ret</span>
        <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">()</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">ret</span>
    <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">()</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">()</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;a:               &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;b:               &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;c:               &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>

<span class="k">print</span> <span class="s2">&quot;a.getOID:        &quot;</span> <span class="o">+</span> <span class="n">a</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;b.getOID:        &quot;</span> <span class="o">+</span> <span class="n">b</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;c.getOID:        &quot;</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Which results in the output for the OID of the code position:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">getOID</span><span class="p">:</span>        <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">getOID</span><span class="o">.</span><span class="n">localFct10</span><span class="o">.</span><span class="n">localFct01</span><span class="o">.</span><span class="n">localFct00</span>
<span class="n">b</span><span class="o">.</span><span class="n">getOID</span><span class="p">:</span>        <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">getOID</span><span class="o">.</span><span class="n">localFct10</span><span class="o">.</span><span class="n">localFct01</span><span class="o">.</span><span class="n">localFct00</span>
<span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">:</span>        <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">getOID</span><span class="o">.</span><span class="n">localFct10</span><span class="o">.</span><span class="n">localFct01</span><span class="o">.</span><span class="n">localFct00</span>
</pre></div>
</td></tr></table></div>
<p>In case of mixed references the resulting OID at the position the <em>getOID</em> function is called is
not correlated to the call hierarchy.
The following code example shows the call of global function from within a deeper nested call hierarchy:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>

<span class="c1">#4TEST: import pysourceinfo.PySourceInfo</span>

<span class="n">module</span> <span class="o">=</span> <span class="n">pysourceinfo</span><span class="o">.</span><span class="n">PySourceInfo</span><span class="o">.</span><span class="n">getCallerOID</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">globalFct01</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">globalFct00</span><span class="p">():</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">pysourceinfo</span><span class="o">.</span><span class="n">PySourceInfo</span><span class="o">.</span><span class="n">getCallerOID</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">globalFct00</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ret</span>

<span class="k">def</span> <span class="nf">globalFct10</span><span class="p">():</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">globalFct01</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ret</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="n">globalFct10</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">ret</span>
        <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">()</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">ret</span>
    <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">()</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">()</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;a:               &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;b:               &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;c:               &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>

<span class="k">print</span> <span class="s2">&quot;a.getOID:        &quot;</span> <span class="o">+</span> <span class="n">a</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;b.getOID:        &quot;</span> <span class="o">+</span> <span class="n">b</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;c.getOID:        &quot;</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Resulting in the OID output of:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">getOID</span><span class="p">:</span>        <span class="n">globalFct10</span><span class="o">.</span><span class="n">globalFct01</span><span class="o">.</span><span class="n">globalFct00</span>
<span class="n">b</span><span class="o">.</span><span class="n">getOID</span><span class="p">:</span>        <span class="n">globalFct10</span><span class="o">.</span><span class="n">globalFct01</span><span class="o">.</span><span class="n">globalFct00</span>
<span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">:</span>        <span class="n">globalFct10</span><span class="o">.</span><span class="n">globalFct01</span><span class="o">.</span><span class="n">globalFct00</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="scopes">
<h4>Scopes<a class="headerlink" href="#scopes" title="Permalink to this headline">¶</a></h4>
<p>The scopes of the runtime elements generally reflect the actual code elements scope accurately.
For an exception refer to the section nested classes.</p>
<p>Scopes of local and global namespaces are utilized by <em>PySourceInfo</em> and <em>PyStackInfo</em> in conjunction
with the stack hierarchy and MRO to find the code relations and positions by relying on the control-flow
logic implemented in the call stack of the Python interpreter.
Due to the available introspection data the required runtime resources are for test and debug
cases under standard circumstances negligible.</p>
<p>This pure Python based approach has the advance, that no patch for libraries neither the interpreter
itself is required.
Thus the packages provide all Python releases with one common API.</p>
<p>Additional information on the stack structure and the included namespace references is available
by the package <em>PyStackInfo</em> <a class="reference internal" href="references.html#pystackinfo" id="id6">[pystackinfo]</a> .</p>
</div>
<div class="section" id="superposition">
<h4>Superposition<a class="headerlink" href="#superposition" title="Permalink to this headline">¶</a></h4>
<p>The automatic superposition by coverage of a redefined call interface involves either derived classes,
or redefinitions in local namespaces in distinction to global namespace or the callers namespace.
This could be distinguished at runtime by analysing the address of the actual executed code object.
The <em>PySourceInfo</em> package resolves this accurately as demostrated by the previous examples.</p>
</div>
</div>
<div class="section" id="callables">
<h3>Callables<a class="headerlink" href="#callables" title="Permalink to this headline">¶</a></h3>
<p>The references to callables at runtime by the interpreter API are represented as unique stack frames, but could be
of various types, e.g. built-ins, method, or functions.
These could also be located within various scopes.</p>
<p>The <em>PySourceInfo</em> and in particular the <em>PyStackInfo</em> packages provide a comprising type analysis based
on the available types from the package  <em>types</em>.
In case of interfaces where an accurate type of a callable is returned, this is constructed
from the stack frame appropriately as a ready to call reference pointer.
The package <em>PyStackInfo</em> provides also the reconstruction of call signatures from the
stack information including the actually passed parameter values.</p>
<p>For advanced features and detailed description refer to the description of the package
<em>PyStackInfo</em> <a class="reference internal" href="references.html#pystackinfo" id="id7">[pystackinfo]</a> .</p>
<div class="section" id="functions">
<h4>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
<p>Functions are in general quite easy to handle, as they represent a context bound and basically
constant-code element.
Thus normally no holomorphy by inheritance is involved and nested containment could easily be mapped
from stack frames.
Addressing from upper scopes is not supported, so the problem of the virtual re-scoping into the
global namespace as with nested classes does not occur.</p>
<p>An example of the construction of a <em>types.FunctionType</em> callable is:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getCallerFunc</span><span class="p">(</span><span class="n">spos</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the callable mem-address of caller function.&quot;&quot;&quot;</span>
    <span class="n">cf</span> <span class="o">=</span> <span class="n">currentframe</span><span class="p">(</span><span class="n">spos</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">FunctionType</span><span class="p">(</span><span class="n">cf</span><span class="o">.</span><span class="n">f_code</span><span class="p">,</span> <span class="n">cf</span><span class="o">.</span><span class="n">f_globals</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cf</span><span class="p">,</span><span class="s1">&#39;__internals__&#39;</span><span class="p">):</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">FunctionType</span><span class="p">(</span><span class="n">cf</span><span class="o">.</span><span class="n">__internals__</span><span class="o">.</span><span class="n">f_code</span><span class="p">,</span> <span class="n">cf</span><span class="o">.</span><span class="n">__internals__</span><span class="o">.</span><span class="n">f_globals</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;arg 5 (closure)&#39;</span><span class="p">):</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;WARNING: This seems to be a PyDev issue, so continue for now:&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="methods">
<h4>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h4>
<p>Class and object methods are basically the same type of callables as functions, with slightly
variation due to their integration into a classes call infrastructure.
The representation of the stack frame represents this by missing a runtime type distinction.
Thus the actual type has to be be evaluated dynamically, which could easily be done by resolving
the namespaces and the MRO.
This is handled by the <em>PySourceInfo</em> and <em>PyStackInfo</em> packages accurately - with the mentioned
exceptions for nested classes.</p>
</div>
</div>
<div class="section" id="class-types">
<h3>Class Types<a class="headerlink" href="#class-types" title="Permalink to this headline">¶</a></h3>
<p>The packages <em>PySourceInfo</em> and <em>PyStackInfo</em> support <em>Old-Style</em> and <em>New-Style</em> classes.
This also include <em>Mix-Ins</em> or <em>Multiple-Inheritance</em>, <em>Meta-Classes</em> and
wrapped classes, methods, and functions by <em>Decorators</em>.</p>
<div class="section" id="old-style">
<h4>Old-Style<a class="headerlink" href="#old-style" title="Permalink to this headline">¶</a></h4>
<p>Transparent support for old style classes, see previous examples:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
    <span class="k">class</span> <span class="nc">B</span><span class="p">:</span>
        <span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="n">pysourceinfo</span><span class="o">.</span><span class="n">PySourceInfo</span><span class="o">.</span><span class="n">getCallerOID</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">ret</span>
        <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">()</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">ret</span>
    <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">()</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span>
</pre></div>
</td></tr></table></div>
<p>For support Python versions see <a class="reference external" href="#python-releases">Releases</a>.</p>
</div>
<div class="section" id="new-style">
<h4>New-Style<a class="headerlink" href="#new-style" title="Permalink to this headline">¶</a></h4>
<p>Transparent support for new style classes, see previous examples:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="n">pysourceinfo</span><span class="o">.</span><span class="n">PySourceInfo</span><span class="o">.</span><span class="n">getCallerOID</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">ret</span>
        <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">A</span><span class="p">()</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">ret</span>
    <span class="k">def</span> <span class="nf">getOID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">B</span><span class="p">()</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getOID</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span>
</pre></div>
</td></tr></table></div>
<p>For support Python versions see <a class="reference external" href="#python-releases">Releases</a>.</p>
</div>
<div class="section" id="meta-classes">
<h4>Meta-Classes<a class="headerlink" href="#meta-classes" title="Permalink to this headline">¶</a></h4>
<p>The following script depicts the application within the <em>__new__</em> and <em>__init__</em>
methods of a meta-class.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>

<span class="c1">#4TEST: import pysourceinfo.PySourceInfo</span>

<span class="n">module</span> <span class="o">=</span> <span class="n">pysourceinfo</span><span class="o">.</span><span class="n">PySourceInfo</span><span class="o">.</span><span class="n">getCallerOID</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">myMeta</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">metaMethod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">pysourceinfo</span><span class="o">.</span><span class="n">PySourceInfo</span><span class="o">.</span><span class="n">getCallerComponentOID</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">ret</span>

        <span class="k">print</span> <span class="n">pysourceinfo</span><span class="o">.</span><span class="n">PySourceInfo</span><span class="o">.</span><span class="n">getCallerComponentOID</span><span class="p">()</span>

        <span class="n">attr</span><span class="p">[</span><span class="s1">&#39;metaMethod&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metaMethod</span>
        <span class="k">return</span> <span class="nb">type</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
        <span class="k">print</span> <span class="n">pysourceinfo</span><span class="o">.</span><span class="n">PySourceInfo</span><span class="o">.</span><span class="n">getCallerComponentOID</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">myMeta</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
            <span class="k">print</span> <span class="n">pysourceinfo</span><span class="o">.</span><span class="n">PySourceInfo</span><span class="o">.</span><span class="n">getCallerComponentOID</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MyClass</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">myMethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">pysourceinfo</span><span class="o">.</span><span class="n">PySourceInfo</span><span class="o">.</span><span class="n">getCallerComponentOID</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span>

<span class="n">mc</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">myMethod</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">metaMethod</span><span class="p">()</span>

<span class="k">print</span> <span class="s2">&quot;a: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;b: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>This prints out:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="o">.</span><span class="n">__new__</span>
<span class="n">myMeta</span><span class="o">.</span><span class="n">__init__</span>
<span class="n">MyClass</span><span class="o">.</span><span class="n">__init__</span>
<span class="n">a</span><span class="p">:</span> <span class="n">MyClass</span><span class="o">.</span><span class="n">myMethod</span>
<span class="n">b</span><span class="p">:</span> <span class="n">MyClass</span><span class="o">.</span><span class="n">metaMethod</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="decorators">
<h4>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h4>
<p>The syntax element of <em>&#64;decorator</em> requires in the Python implementation due to the
dynamic evaluation of the source-location some special handling.
This is due to the virtual relocation of the call, which is the position of the wrapped call,
whereas the location should be the position of the wrapper code.
The dynamic detection of this circumstance based on the code object would require
pure-blind stack scanning for each call, resulting from the lack of context information
about decorators.
Thus is it is decided to add the following specific decorators in order to handle decorated
callables including classes.</p>
<ul class="simple">
<li>getSourceLocation</li>
<li>getClassSourceLocation</li>
</ul>
<p>These has to be applied either on the definition of the wrapper calls/classes,
or as the first element of a chain of decorators.
Thus the actual position of the source code of the decorator is registered by the related
object linked to the caller stack frame and will be used in the context of the wrapped calls/classes.</p>
<p>The chained application of multiple decorators requires some additional measures.
As a reminder, the projects <em>PySourceInfo</em> and <em>PyStackInfo</em> rely purely on the
dynamic runtime type information and the call stack.
This is for Python as for other languages providing introspection perfectly applicable.
Due to the implementation of pointer based syntax transformation with limited program based
excess to the internal interpreter data there are the following exceptions:</p>
<ul class="simple">
<li>nested class definitions</li>
<li>chained decorators</li>
<li>references resulting from spanning multiple instances</li>
</ul>
<p>The basic rule is that the resulting reference defines the call context of the stack frame.
Thus this limits the simple scan for caller evaluation, because the prefix of the pre-span
of instances could not evaluated by a simple chain of back-references, but has to be
evaluated by the AST, either the the represented interpreter data, or by loading the source
particularly for this purpose again.</p>
<p>The solution is therefore simple but requires the application of the previous decorators.
These evaluate the code position at their insertion point and store this in their stack objects.
Thus the library of <em>PySourceInfo</em> could detect this entry and insert the appropriate location prefix.
In order to keep the implementation fast and therefore the simple it is required in case of
decorating a decorator - so called chained decorators - it is required to put the
decorators for the code position at the beginning of the chain, and in addition at the end of the chain.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">decoratorlocation</span>
<span class="nd">@getSourceLocation</span>
<span class="nd">@someDecorator</span>
<span class="nd">@justAnotherDecorator</span>
<span class="nd">@andOneMore</span>
<span class="nd">@getSourceLocation</span>
<span class="k">def</span> <span class="nf">theActualDecorator</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>The following cases has to be distinguished.</p>
<ul class="simple">
<li>no sub-decorator</li>
<li>chained sub-decorators</li>
</ul>
<p>ffs.</p>
</div>
</div>
<div class="section" id="module-types">
<h3>Module Types<a class="headerlink" href="#module-types" title="Permalink to this headline">¶</a></h3>
<p>The persistent Python code is divided into packages and modules.
These represent storage entities of code within single files as modules,
and groups assembling one or more modules into a combined set as a package.
Consequently the addressing of modules and packages is seamless integrated
into the address pattern of the runtime representation of Python syntax elements.
Python supports hereby for multiple top-nodes with a look-up algorithm for requested
modules.</p>
<p>The address of a syntax entity consists basically of three parts:</p>
<ol class="arabic simple">
<li>The package path relative to one of the top-nodes.</li>
<li>The module path, relative to the package entry path.
The package can consist hereby of one and only module.</li>
<li>The relative object path within a module.
This represents the global address within a modules global name space.</li>
</ol>
<p>The address syntax itself is seamless combining all three parts into one.
The addresses as defined within the telecom domain as OID - object identifier - are
represented by dotted-notation.</p>
<p>The <em>PyStackInfo</em> package uses the <em>PySourceInfo</em> package for the management of address components.
This comprises in particular the path names correlated tightly to the file system and
the <em>PYTHONPATH</em> environment variable.</p>
<div class="section" id="modules-api-by-imp">
<h4>Modules API by imp<a class="headerlink" href="#modules-api-by-imp" title="Permalink to this headline">¶</a></h4>
<p>The <em>imp</em> module is utilized by the <em>PySourceInfo</em> package in order to get the type information
of modules by the interface <em>getmodule_type</em>, which provides re-mapped values from <em>imp</em>.</p>
<p>The utilized calls are:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">imp</span> <span class="kn">import</span> <span class="n">is_builtin</span><span class="p">,</span><span class="n">is_frozen</span><span class="p">,</span><span class="n">find_module</span>
</pre></div>
</td></tr></table></div>
<p>The results of the interface <em>getmodule_type</em> is mapped onto the values of <em>imp</em>, thus
provides a compatible interface for:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">imp</span> <span class="kn">import</span> <span class="n">PY_SOURCE</span><span class="p">,</span><span class="n">PY_COMPILED</span><span class="p">,</span><span class="n">C_EXTENSION</span><span class="p">,</span><span class="n">PKG_DIRECTORY</span><span class="p">,</span><span class="n">C_BUILTIN</span><span class="p">,</span><span class="n">PY_FROZEN</span>
</pre></div>
</td></tr></table></div>
<p>which could also be imported with identical values from <em>PySourceInfo</em>:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pysourceinfo.PySourceInfo</span> <span class="kn">import</span> <span class="n">getmodule_type</span><span class="p">,</span><span class="n">PY_SOURCE</span><span class="p">,</span><span class="n">PY_COMPILED</span><span class="p">,</span><span class="n">C_EXTENSION</span><span class="p">,</span><span class="n">PKG_DIRECTORY</span><span class="p">,</span><span class="n">C_BUILTIN</span><span class="p">,</span><span class="n">PY_FROZEN</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="modules-api-by-sys">
<h4>Modules API by sys<a class="headerlink" href="#modules-api-by-sys" title="Permalink to this headline">¶</a></h4>
<p>The <em>sys</em> package provides for basic runtime platform related interfaces.
This covers for <em>PyStackInfo</em> and  <em>PySourceInfo</em> the requirement for the two data structures:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span>
<span class="n">sys</span><span class="o">.</span><span class="n">modules</span>
</pre></div>
</td></tr></table></div>
<p>Which are applied as:</p>
<ul>
<li><p class="first"><em>sys.argv</em></p>
<p>The <em>sys.argv</em> is in particular used by <em>PySourceInfo</em> in order to split
the package-path and the internal module-path.
This is under some circumstances slightly more accurate than by <em>inspect</em> only.</p>
</li>
<li><p class="first"><em>sys.modules</em></p>
<p>The <em>sys.modules</em> is used here mainly as a ready-to-use enumeration for set operations.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="api-interfaces">
<h2>API - Interfaces<a class="headerlink" href="#api-interfaces" title="Permalink to this headline">¶</a></h2>
<div class="section" id="common-conventions">
<h3>Common conventions<a class="headerlink" href="#common-conventions" title="Permalink to this headline">¶</a></h3>
<p>The following common conventions are applied:</p>
<ul>
<li><p class="first"><strong>normpath</strong></p>
<p>In general the processing and results of the <em>pysourceinfo</em> is proceeded with
normalized filesystem paths by <em>normpath</em>. For specific effects refer to the following
items.</p>
</li>
<li><p class="first"><strong>realpath</strong></p>
<p>Optionally the processing and results could be converted to realpath, which
in addition to the seperator normalization resolves and converts symbolic links
to the actual filesystem nodes.</p>
</li>
<li><p class="first"><strong>filenames</strong></p>
<p>Filenames represent either the the source files, or the compiled
meta-files. While the source files are represented commonly by
the name and the postfix &#8216;.py&#8217; as default, the compiled files
vary by multiple options and Python versions.</p>
</li>
<li><p class="first"><strong>pathnames</strong></p>
<p>Pathnames are normalized in general
without a trailing path seperator.
The pathnames are returned absolute, except for the
interfaces ending by &#8220;<em>_rel</em>&#8221;, which result in
relative pathnames.</p>
</li>
<li><p class="first"><strong>filepathnames</strong></p>
<p>Filepathnames are normalized in general.
The filepathnames are returned absolute, except for the
interfaces ending by &#8220;<em>_rel</em>&#8221;, which result in
relative pathnames.</p>
<p>In case of packages within an own subdirectory, the
filepathname is defined as the path to the package path,
thus actually represents the subdirectory of the package.
This seems to be consequent, though the package basically is
represented by it&#8217;s <em>__init__</em> file, which is not displayed.</p>
</li>
<li><p class="first"><strong>sys.path</strong></p>
<p>The original <em>sys.path</em> variable is kept untouched, while the
contained values are internally normalized and processed for comparison
with normalized values.
This results in returned values as normalized filesystem paths, which evantually
deviate from the literal input, e.g.:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">a</span><span class="o">/</span><span class="n">b</span><span class="o">////</span><span class="n">c</span><span class="o">////</span><span class="n">d</span><span class="o">///..//</span>  <span class="o">=&gt;</span> <span class="o">/</span><span class="n">a</span><span class="o">/</span><span class="n">b</span><span class="o">/</span><span class="n">c</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<div class="section" id="filesystem-binding-functions">
<h3>Filesystem Binding Functions<a class="headerlink" href="#filesystem-binding-functions" title="Permalink to this headline">¶</a></h3>
<p>The bindings provide simplified access to files for stack and memory objects.</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="29%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">[template]</th>
<th class="head">[obj]</th>
<th class="head">[description]</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>get&lt;obj&gt;_filename</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_filename">C0</a>], Module[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getmodule_filename">M0</a>],</td>
<td>name of the actual executed module file itself</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_filepathname</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_filepathname">C1</a>], Module[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getmodule_filepathname">M1</a>],</td>
<td>absolute path to actual executed module</td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_linenumber</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_linenumber">C2</a>]</td>
<td>line number of caller in module file</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_linenumber_def</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_linenumber_def">C3</a>]</td>
<td>first line number of the caller</td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_package_name</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_package_name">C4</a>], Module[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getmodule_package_name">M4</a>],</td>
<td>package name</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_package_filename</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_package_filename">C5</a>], Module[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getmodule_package_filename">M5</a>],</td>
<td>package file/directory name</td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_package_filepathname</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_package_filepathname">C6</a>], Module[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getmodule_package_filepathname">M6</a>],</td>
<td>absolute path into the package directory/file</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_package_pathname</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_pathname">C7</a>], Module[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getmodule_package_pathname">M7</a>],</td>
<td>absolute path into the package directory/file</td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_pathname</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_pathname_rel">C8</a>], Module[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getmodule_pathname">M8</a>],</td>
<td>pathname to containing directory  of the module</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_pathname_rel</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_pathname_sub">C9</a>], Module[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getmodule_pathname_rel">M9</a>],</td>
<td>path name to module including package</td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_pathname_sub</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_python_pathname">C10</a>], Module[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getmodule_pathname_sub">M10</a>],</td>
<td>path portion between the package and the module</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_python_pathname</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_source_filepathname">C11</a>], Module[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getmodule_python_pathname">M11</a>],</td>
<td>directory from sys.path</td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_source_filepathname</td>
<td>Caller[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getcaller_source_filepathname">C12</a>], Module[<a class="reference external" href="fileinfo.html#pysourceinfo.fileinfo.getmodule_filepathname">M12</a>],</td>
<td>absolute path to source module</td>
</tr>
</tbody>
</table>
<p>See pysourceinfo.fileinfo [<a class="reference external" href="shortcuts.html#pysourceinfo-fileinfoinfo">shortcuts</a>]</p>
</div>
<div class="section" id="object-binding-functions">
<h3>Object Binding Functions<a class="headerlink" href="#object-binding-functions" title="Permalink to this headline">¶</a></h3>
<p>The bindings provide simplified address evaluation and resolution for stack and memory objects.</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="33%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">[template]</th>
<th class="head">[obj]</th>
<th class="head">[description]</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>get&lt;obj&gt;_by_id</td>
<td>Module[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getmodule_by_id">M20</a>]</td>
<td>reference to <em>&lt;obj&gt;</em></td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_by_name</td>
<td>Module[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getmodule_by_name">M21</a>]</td>
<td>reference to <em>&lt;obj&gt;</em></td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_module</td>
<td>Caller[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getcaller_module">C22</a>]</td>
<td>the module itself</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_module_name</td>
<td>Caller[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getcaller_module_name">C23</a>]</td>
<td>name of the module itself</td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_module_name_sub</td>
<td>Caller[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getcaller_module_name_sub">C24</a>]</td>
<td>OID portion from package to module</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_module_oid</td>
<td>Caller[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getcaller_module_oid">C25</a>]</td>
<td>name of module relative to sys.argv</td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_module_oid_sub</td>
<td>Caller[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getcaller_module_oid_sub">C26</a>]</td>
<td>relative module OID within package</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_name</td>
<td>Caller[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getcaller_name">C27</a>], Module[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getmodule_name">M27</a>]</td>
<td>the __name__ attribute</td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_name_sub</td>
<td>Module[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getmodule_name_sub">M28</a>]</td>
<td>the __name__ attribute</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_oid</td>
<td>Module[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getmodule_oid">M29</a>]</td>
<td>the complete OID relative to sys.argv</td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_oid_sub</td>
<td>Module[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getmodule_oid_sub">M30</a>]</td>
<td>relative module OID within package</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_package_name</td>
<td>Caller[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getcaller_package_name">C31</a>], Module[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getmodule_package_name">M31</a>]</td>
<td>the name of the package</td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_type</td>
<td>Module[<a class="reference external" href="objectinfo.html#pysourceinfo.objectinfo.getmodule_type">M32</a>]</td>
<td>bit array for &lt;obj&gt;</td>
</tr>
</tbody>
</table>
<p>See pysourceinfo.objectinfo [<a class="reference external" href="shortcuts.html#pysourceinfo-objectinfo">shortcuts</a>]</p>
</div>
<div class="section" id="sets-and-entities">
<span id="setsandentities"></span><h3>Sets and Entities<a class="headerlink" href="#sets-and-entities" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="12%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">[template]</th>
<th class="head">[obj]</th>
<th class="head">[description]</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>get&lt;obj&gt;_module_filepathname_list</td>
<td>Sys[<a class="reference external" href="infolists.html#pysourceinfo.infolists.getsysmodules_filepathname_list">S70</a>]</td>
<td>list of file path names for all loaded modules</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_module_id_list</td>
<td>Sys[<a class="reference external" href="infolists.html#pysourceinfo.infolists.getsysmodules_id_list">S71</a>]</td>
<td>list of IDs for modules in <em>sys.modules</em></td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_module_list</td>
<td>Sys[<a class="reference external" href="infolists.html#pysourceinfo.infolists.getsysmodules_list">S72</a>]</td>
<td>list of modules on stack/sys.modules</td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_module_name_list</td>
<td>Sys[<a class="reference external" href="infolists.html#pysourceinfo.infolists.getsysmodules_name_list">S73</a>]</td>
<td>list of module names from <em>sys.modules</em></td>
</tr>
<tr class="row-even"><td>get&lt;obj&gt;_module_pathname_list</td>
<td>Sys[<a class="reference external" href="infolists.html#pysourceinfo.infolists.getsysmodules_pathname_list">S74</a>]</td>
<td>list of path names for modules in <em>sys.modules</em></td>
</tr>
<tr class="row-odd"><td>get&lt;obj&gt;_module_python_pathname_list</td>
<td>Sys[<a class="reference external" href="infolists.html#pysourceinfo.infolists.getsysmodules_pathname_rel_list">S75</a>]</td>
<td>list of python path entries for module in <em>sys.modules</em></td>
</tr>
</tbody>
</table>
<p><strong>REMARK</strong>: The naming schema has one exception, when the object is <em>module</em>, the
name part <em>_module</em> is dropped in order to avoid redundancy, e.g.:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">obj</span> <span class="p">:</span><span class="o">=</span> <span class="n">module</span>
<span class="n">getmodule_module_list</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">getmodule_list</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Similar for the remaining.</p>
<p>See pysourceinfo.infolists [<a class="reference external" href="shortcuts.html#pysourceinfo-infolists">shortcuts</a>]</p>
</div>
</div>
<div class="section" id="python-releases">
<h2>Python Releases<a class="headerlink" href="#python-releases" title="Permalink to this headline">¶</a></h2>
<p>The <em>pysourceinfo</em> in combination with <em>pystackinfo</em> provides fully
dynamic replacement for the evaluation of <em>__qualname__</em> for
<em>Python2</em> and <em>Python3</em>.
This comprises the correct detection of static and dynamic,
e.g. nested classes, meta-classes, nested decorators,
dynamic instance and class methods and static functions,
dynamic functions for global and private scope, etc.</p>
<ul>
<li><p class="first"><strong>Python2.7</strong></p>
<p>The current version of this package is tested for <em>Python2.7+</em>
with:</p>
<blockquote>
<div><p>2.7.5, 2.7.12</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Python3.x</strong></p>
<p>The current version of this package is tested for <em>Python3.5+</em>
with:</p>
<blockquote>
<div><p>3.5.3, 3.6.2</p>
</div></blockquote>
</li>
<li><p class="first"><strong>PyPy2</strong></p>
<p>The current version of this package is tested for <em>PyPy2</em>
with:</p>
<blockquote>
<div><p>5.10.0</p>
</div></blockquote>
</li>
<li><p class="first"><strong>PyPy3</strong></p>
<p>The current version of this package is tested for <em>PyPy3.5</em>
with:</p>
<blockquote>
<div><p>5.10.1</p>
</div></blockquote>
</li>
</ul>
<p>The support for <em>__qualname__</em> <a class="reference internal" href="references.html#pep3155" id="id11">[PEP3155]</a>
with extended support for dynamic created entries is available
by <a class="reference internal" href="references.html#pystackinfo" id="id12">[pystackinfo]</a>.</p>
</div>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>classtools package [classtools]</li>
<li>decorator package <a class="reference internal" href="references.html#msimio" id="id14">[msimio]</a></li>
<li>functools Python2 <a class="reference internal" href="references.html#functools2" id="id15">[functools2]</a></li>
<li>functools Python3 <a class="reference internal" href="references.html#functools3" id="id16">[functools3]</a></li>
<li>inspect Python2 <a class="reference internal" href="references.html#inspect2" id="id17">[inspect2]</a></li>
<li>inspect Python3 <a class="reference internal" href="references.html#inspect3" id="id18">[inspect3]</a></li>
<li>pystackinfo package <a class="reference internal" href="references.html#pystackinfo" id="id19">[pystackinfo]</a></li>
<li>types Python2 <a class="reference internal" href="references.html#types2" id="id20">[types2]</a></li>
<li>types Python3 <a class="reference internal" href="references.html#types3" id="id21">[types3]</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/pysourceinfo-64x64.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Name-Binding - A Python API for Files and Objects</a><ul>
<li><a class="reference internal" href="#address-components">Address Components</a><ul>
<li><a class="reference internal" href="#address-hierarchies">Address Hierarchies</a><ul>
<li><a class="reference internal" href="#containment-and-inheritance">Containment and Inheritance</a></li>
<li><a class="reference internal" href="#nested-functions">Nested Functions</a></li>
<li><a class="reference internal" href="#nested-classes">Nested Classes</a></li>
<li><a class="reference internal" href="#mixed-refrences">Mixed-Refrences</a></li>
<li><a class="reference internal" href="#scopes">Scopes</a></li>
<li><a class="reference internal" href="#superposition">Superposition</a></li>
</ul>
</li>
<li><a class="reference internal" href="#callables">Callables</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#methods">Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#class-types">Class Types</a><ul>
<li><a class="reference internal" href="#old-style">Old-Style</a></li>
<li><a class="reference internal" href="#new-style">New-Style</a></li>
<li><a class="reference internal" href="#meta-classes">Meta-Classes</a></li>
<li><a class="reference internal" href="#decorators">Decorators</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-types">Module Types</a><ul>
<li><a class="reference internal" href="#modules-api-by-imp">Modules API by imp</a></li>
<li><a class="reference internal" href="#modules-api-by-sys">Modules API by sys</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#api-interfaces">API - Interfaces</a><ul>
<li><a class="reference internal" href="#common-conventions">Common conventions</a></li>
<li><a class="reference internal" href="#filesystem-binding-functions">Filesystem Binding Functions</a></li>
<li><a class="reference internal" href="#object-binding-functions">Object Binding Functions</a></li>
<li><a class="reference internal" href="#sets-and-entities">Sets and Entities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-releases">Python Releases</a></li>
<li><a class="reference internal" href="#resources">Resources</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="howto.html"
                        title="previous chapter">Howto</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pysourceinfo.html"
                        title="next chapter">&#8216;pysourceinfo.__init__&#8217; - Module</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/namebinding.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pysourceinfo.html" title="‘pysourceinfo.__init__’ - Module"
             >next</a> |</li>
        <li class="right" >
          <a href="howto.html" title="Howto"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pysourceinfo 0.1.32 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2018, Arno-Can Uestuensoez.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.5.
    </div>
  </body>
</html>